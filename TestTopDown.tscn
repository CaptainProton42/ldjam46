[gd_scene load_steps=15 format=2]

[ext_resource path="res://Heart.gd" type="Script" id=1]
[ext_resource path="res://Camera.gd" type="Script" id=2]
[ext_resource path="res://MeshInstance.gd" type="Script" id=3]
[ext_resource path="res://Menu.tscn" type="PackedScene" id=4]

[sub_resource type="BoxShape" id=1]

[sub_resource type="CubeMesh" id=2]

[sub_resource type="PhysicsMaterial" id=3]
rough = true
bounce = 0.2

[sub_resource type="SphereShape" id=4]
radius = 0.1

[sub_resource type="SphereMesh" id=5]
radius = 0.1
height = 0.2

[sub_resource type="Shader" id=6]
code = "shader_type spatial;

uniform float squish : hint_range(0.0f, 1.0f);

void fragment() {
	ALBEDO = vec3(1.0f, 0.0f, 0.0f);
}

void vertex() {
	VERTEX.y = VERTEX.y * squish;
}"

[sub_resource type="ShaderMaterial" id=7]
shader = SubResource( 6 )
shader_param/squish = 1.0

[sub_resource type="BoxShape" id=8]

[sub_resource type="CubeMesh" id=9]

[sub_resource type="SpatialMaterial" id=10]
albedo_color = Color( 1, 0.317647, 0.317647, 1 )

[node name="Spatial" type="Spatial"]

[node name="Control" parent="." instance=ExtResource( 4 )]

[node name="StaticBody" type="StaticBody" parent="."]
transform = Transform( 44.6974, 0, 0, 0, 0.198162, 0, 0, 0, 41.314, 0, 0, 0 )

[node name="CollisionShape" type="CollisionShape" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0 )
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 0.999999, 0, 0, 0, 0.999999, 0.00871884, -0.644971, -0.00110533 )
mesh = SubResource( 2 )
material/0 = null

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( -0.88748, -0.399678, -0.229428, -0.451527, 0.654499, 0.606428, -0.0922149, 0.641785, -0.76132, -17.7615, 15.6952, 0 )
shadow_enabled = true
directional_shadow_normal_bias = 0.0
directional_shadow_depth_range = 1

[node name="Camera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, -0.00260043, 0.999997, 0, -0.999997, -0.00260043, -0.179622, 2.49267, -0.0152571 )
script = ExtResource( 2 )

[node name="Heart" type="RigidBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0 )
physics_material_override = SubResource( 3 )
contacts_reported = 1
contact_monitor = true
script = ExtResource( 1 )

[node name="CollisionShape" type="CollisionShape" parent="Heart"]
shape = SubResource( 4 )
__meta__ = {
"_edit_lock_": true
}

[node name="MeshInstance" type="MeshInstance" parent="Heart"]
mesh = SubResource( 5 )
material/0 = SubResource( 7 )
__meta__ = {
"_edit_lock_": true
}

[node name="w" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.67723, -0.15858, 0.276445 )

[node name="CollisionShape" type="CollisionShape" parent="w"]
shape = SubResource( 8 )
__meta__ = {
"_edit_lock_": true
}

[node name="MeshInstance" type="MeshInstance" parent="w"]
mesh = SubResource( 9 )
material/0 = null
__meta__ = {
"_edit_lock_": true
}

[node name="w2" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.28602, -0.488627, -0.341284 )

[node name="CollisionShape" type="CollisionShape" parent="w2"]
shape = SubResource( 8 )
__meta__ = {
"_edit_lock_": true
}

[node name="MeshInstance" type="MeshInstance" parent="w2"]
mesh = SubResource( 9 )
material/0 = null
__meta__ = {
"_edit_lock_": true
}

[node name="Spatial" type="Spatial" parent="."]
visible = false
script = ExtResource( 3 )

[node name="MeshInstance" type="MeshInstance" parent="Spatial"]
mesh = SubResource( 5 )
material/0 = SubResource( 10 )
__meta__ = {
"_edit_lock_": true
}
[connection signal="input_event" from="Heart" to="Heart" method="_on_Heart_input_event"]
